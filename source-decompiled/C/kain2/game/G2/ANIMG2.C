#include "THISDUST.H"
#include "ANIMG2.H"


// decompiled code
// original method signature: 
// enum _G2Bool_Enum /*$ra*/ G2Anim_Install()
 // line 260, offset 0x800929a4
	/* begin block 1 */
		// Start line: 261
		// Start offset: 0x800929A4
		// Variables:
	// 		struct _G2AnimController_Type *dummyController; // $a0
	/* end block 1 */
	// End offset: 0x800929A4
	// End Line: 261

	/* begin block 2 */
		// Start line: 520
	/* end block 2 */
	// End Line: 521

/* WARNING: Unknown calling convention yet parameter storage is locked */

_G2Bool_Enum G2Anim_Install(void)

{
  undefined4 *puVar1;
  _G2Bool_Enum _Var2;
  undefined4 *in_a0;
  _G2Matrix_Type *matrix;
  long order;
  uint uVar3;
  int iVar4;
  
  uVar3 = (uint)*(byte *)((int)in_a0 + 3);
  iVar4 = in_a0[0xb];
  G2EulerAngles_FromMatrix
            ((_G2EulerAngles_Type *)&_G2AnimSegValue_Type_ARRAY_800d4f7c[0].trans,matrix,order);
  *(undefined4 **)(iVar4 + 8) = in_a0;
  if (in_a0 == (undefined4 *)0x0) {
LAB_80092a20:
    _Var2 = *(_G2Bool_Enum *)(iVar4 + 8);
  }
  else {
    do {
      uVar3 = uVar3 - 4;
      if ((int)uVar3 < 1) {
        *in_a0 = 0;
        goto LAB_80092a20;
      }
      puVar1 = in_a0;
      G2EulerAngles_FromMatrix
                ((_G2EulerAngles_Type *)&_G2AnimSegValue_Type_ARRAY_800d4f7c[0].trans,matrix,order);
      *(undefined4 **)in_a0 = puVar1;
      in_a0 = puVar1;
    } while (puVar1 != (undefined4 *)0x0);
    FUN_80092a3c(*(undefined4 *)(iVar4 + 8));
    _Var2 = G2FALSE;
    *(undefined4 *)(iVar4 + 8) = 0;
  }
  return _Var2;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_ResetInternalState()
 // line 309, offset 0x80092a0c
	/* begin block 1 */
		// Start line: 310
		// Start offset: 0x80092A0C
		// Variables:
	// 		struct _G2AnimController_Type *dummyController; // $v0
	/* end block 1 */
	// End offset: 0x80092A0C
	// End Line: 310

	/* begin block 2 */
		// Start line: 627
	/* end block 2 */
	// End Line: 628

/* WARNING: Unknown calling convention yet parameter storage is locked */

void G2Anim_ResetInternalState(void)

{
  undefined4 *puVar1;
  undefined4 *in_v0;
  _G2Matrix_Type *matrix;
  long order;
  int unaff_s0;
  int unaff_s2;
  
  do {
    unaff_s0 = unaff_s0 + -4;
    if (unaff_s0 < 1) {
      *in_v0 = 0;
      return;
    }
    puVar1 = in_v0;
    G2EulerAngles_FromMatrix
              ((_G2EulerAngles_Type *)&_G2AnimSegValue_Type_ARRAY_800d4f7c[0].trans,matrix,order);
    *(undefined4 **)in_v0 = puVar1;
    in_v0 = puVar1;
  } while (puVar1 != (undefined4 *)0x0);
  FUN_80092a3c(*(undefined4 *)(unaff_s2 + 8));
  *(undefined4 *)(unaff_s2 + 8) = 0;
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_Init(struct _G2Anim_Type *anim /*$s0*/, struct _Model *modelData /*$s1*/)
 // line 374, offset 0x80092a64
	/* begin block 1 */
		// Start line: 375
		// Start offset: 0x80092A64
		// Variables:
	// 		struct _G2AnimSection_Type *section; // $v0
	// 		int sectionID; // $a0
	/* end block 1 */
	// End offset: 0x80092AD8
	// End Line: 428

	/* begin block 2 */
		// Start line: 748
	/* end block 2 */
	// End Line: 749

void G2Anim_Init(_G2Anim_Type *anim,_Model *modelData)

{
  while (modelData != (_Model *)0x0) {
    modelData = (_Model *)modelData->numVertices;
    FUN_80095f78(0x800d4f8c);
  }
  return;
}



// decompiled code
// original method signature: 
// struct _G2AnimSection_Type * /*$ra*/ G2Anim_AddSection(struct _G2Anim_Type *anim /*$s1*/, int firstSegID /*$s2*/, int segCount /*$s3*/)
 // line 439, offset 0x80092af8
	/* begin block 1 */
		// Start line: 440
		// Start offset: 0x80092AF8
		// Variables:
	// 		struct _G2AnimSection_Type *section; // $s0
	/* end block 1 */
	// End offset: 0x80092AF8
	// End Line: 440

	/* begin block 2 */
		// Start line: 904
	/* end block 2 */
	// End Line: 905

_G2AnimSection_Type * G2Anim_AddSection(_G2Anim_Type *anim,int firstSegID,int segCount)

{
  _G2AnimSection_Type *p_Var1;
  
  FUN_80095ee0(0x800d4f8c);
  p_Var1 = (_G2AnimSection_Type *)FUN_80095ee0(_G2AnimSegValue_Type_ARRAY_800d4f7c);
  G2EulerAngles_FromMatrix
            ((_G2EulerAngles_Type *)_G2AnimSegValue_Type_ARRAY_800d4f7c,(_G2Matrix_Type *)firstSegID
             ,segCount);
  *(undefined2 *)p_Var1 = 0;
  p_Var1->segCount = -1;
  p_Var1->firstSeg = '\0';
  return p_Var1;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_Free(struct _G2Anim_Type *anim /*$s4*/)
 // line 487, offset 0x80092b94
	/* begin block 1 */
		// Start line: 488
		// Start offset: 0x80092B94
		// Variables:
	// 		struct _G2AnimSection_Type *animSection; // $s1
	// 		int sectionID; // $s2
	// 		struct _G2AnimInterpInfo_Type *interpInfo; // $s0
	/* end block 1 */
	// End offset: 0x80092C30
	// End Line: 527

	/* begin block 2 */
		// Start line: 1048
	/* end block 2 */
	// End Line: 1049

void G2Anim_Free(_G2Anim_Type *anim)

{
  int in_v0;
  int in_v1;
  undefined4 in_a1;
  undefined2 in_a2;
  int unaff_s0;
  int unaff_s1;
  
  while( true ) {
    anim = (_G2Anim_Type *)&anim->masterSection;
    *(undefined2 *)(in_v0 + 6) = in_a2;
    *(undefined4 *)(in_v0 + 0xc) = 0;
    *(undefined4 *)(in_v0 + 0x10) = in_a1;
    in_v1 = in_v1 + 0x30;
    if (2 < (int)anim) break;
    in_v0 = unaff_s0 + in_v1;
  }
  *(undefined *)(unaff_s0 + 0x27) = *(undefined *)(unaff_s1 + 0x18);
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_Restore(struct _G2Anim_Type *anim /*$s2*/)
 // line 531, offset 0x80092c50
	/* begin block 1 */
		// Start line: 532
		// Start offset: 0x80092C50
		// Variables:
	// 		struct _G2AnimSection_Type *animSection; // $a0
	// 		int sectionID; // $s0
	/* end block 1 */
	// End offset: 0x80092CB8
	// End Line: 553

	/* begin block 2 */
		// Start line: 1162
	/* end block 2 */
	// End Line: 1163

void G2Anim_Restore(_G2Anim_Type *anim)

{
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_BuildTransforms(struct _G2Anim_Type *anim /*$s0*/)
 // line 562, offset 0x80092cd0
	/* begin block 1 */
		// Start line: 563
		// Start offset: 0x80092CD0

		/* begin block 1.1 */
			// Start line: 574
			// Start offset: 0x80092CF8
		/* end block 1.1 */
		// End offset: 0x80092D00
		// End Line: 574

		/* begin block 1.2 */
			// Start line: 586
			// Start offset: 0x80092D38

			/* begin block 1.2.1 */
				// Start line: 586
				// Start offset: 0x80092D38
				// Variables:
			// 		unsigned short z; // $v0
			// 		unsigned long xy; // $v1
			/* end block 1.2.1 */
			// End offset: 0x80092D38
			// End Line: 586
		/* end block 1.2 */
		// End offset: 0x80092D38
		// End Line: 586

		/* begin block 1.3 */
			// Start line: 598
			// Start offset: 0x80092D6C
		/* end block 1.3 */
		// End offset: 0x80092D6C
		// End Line: 598
	/* end block 1 */
	// End offset: 0x80092D6C
	// End Line: 598

	/* begin block 2 */
		// Start line: 1238
	/* end block 2 */
	// End Line: 1239

void G2Anim_BuildTransforms(_G2Anim_Type *anim)

{
  uint uVar1;
  _G2AnimInterpInfo_Type *p_Var2;
  _G2AnimSection_Type *section;
  int unaff_s2;
  int unaff_s3;
  byte *unaff_s4;
  
  while( true ) {
    p_Var2 = section->interpInfo;
    section->chanStatusBlockList = (_G2AnimChanStatusBlock_Type *)0x0;
    if (p_Var2 != (_G2AnimInterpInfo_Type *)0x0) {
      FUN_80092a3c(p_Var2->stateBlockList);
      p_Var2->stateBlockList = (_G2AnimInterpStateBlock_Type *)0x0;
    }
    unaff_s2 = unaff_s2 + 1;
    uVar1 = (uint)(unaff_s2 < (int)(uint)*unaff_s4);
    unaff_s3 = unaff_s3 + 0x30;
    if (unaff_s2 >= (int)(uint)*unaff_s4) break;
    section = (_G2AnimSection_Type *)(unaff_s4 + unaff_s3);
    G2AnimSection_SetLooping(section);
    if (uVar1 != 0) {
      section->elapsedTime = section->interpInfo->targetTime;
    }
    FUN_80094dc4(section->chanStatusBlockList);
  }
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_UpdateStoredFrame(struct _G2Anim_Type *anim /*$s2*/)
 // line 617, offset 0x80092d9c
	/* begin block 1 */
		// Start line: 618
		// Start offset: 0x80092D9C
		// Variables:
	// 		struct _G2AnimSection_Type *section; // $s0
	// 		short storedTime; // $s3
	// 		short elapsedTime; // $s4
	// 		struct _G2SVector3_Type motionVector; // stack offset -32
	// 		int sectionCount; // $s1
	// 		struct _G2AnimInterpInfo_Type *interpInfo; // $v0

		/* begin block 1.1 */
			// Start line: 669
			// Start offset: 0x80092E28
			// Variables:
		// 		struct _G2SVector3_Type *vector; // $a3
		/* end block 1.1 */
		// End offset: 0x80092E28
		// End Line: 669
	/* end block 1 */
	// End offset: 0x80092EF8
	// End Line: 703

	/* begin block 2 */
		// Start line: 1353
	/* end block 2 */
	// End Line: 1354

void G2Anim_UpdateStoredFrame(_G2Anim_Type *anim)

{
  return;
}



// decompiled code
// original method signature: 
// struct _G2AnimSection_Type * /*$ra*/ G2Anim_GetSectionWithSeg(struct _G2Anim_Type *anim /*$a0*/, int segNumber /*$a1*/)
 // line 712, offset 0x80092f18
	/* begin block 1 */
		// Start line: 715
		// Start offset: 0x80092F18
		// Variables:
	// 		struct _G2AnimSection_Type *section; // $a3
	// 		struct _G2AnimSection_Type *tempSection; // $a2
	// 		struct _G2AnimSection_Type *endSection; // $a0
	// 		int firstSeg; // $v1
	// 		int lastSeg; // $v0
	/* end block 1 */
	// End offset: 0x80092F7C
	// End Line: 747

	/* begin block 2 */
		// Start line: 1557
	/* end block 2 */
	// End Line: 1558

	/* begin block 3 */
		// Start line: 1559
	/* end block 3 */
	// End Line: 1560

	/* begin block 4 */
		// Start line: 1570
	/* end block 4 */
	// End Line: 1571

	/* begin block 5 */
		// Start line: 1574
	/* end block 5 */
	// End Line: 1575

_G2AnimSection_Type * G2Anim_GetSectionWithSeg(_G2Anim_Type *anim,int segNumber)

{
  int in_v0;
  _G2AnimSection_Type *p_Var1;
  int in_v1;
  int in_a2;
  int in_a3;
  int unaff_s2;
  short in_stack_00000010;
  short in_stack_00000012;
  ushort in_stack_00000014;
  
  *(undefined2 *)(in_a3 + 4) = 0;
  if ((in_v0 != 0) || (in_v1 < in_a2)) {
    FUN_8008fb30();
  }
  if ((*(byte *)(unaff_s2 + 0x24) & 4) == 0) {
    *(short *)(unaff_s2 + 8) = *(short *)(unaff_s2 + 8) + in_stack_00000010;
    *(short *)(unaff_s2 + 10) = *(short *)(unaff_s2 + 10) + in_stack_00000012;
    p_Var1 = (_G2AnimSection_Type *)((uint)*(ushort *)(unaff_s2 + 0xc) + (uint)in_stack_00000014);
  }
  else {
    *(short *)(unaff_s2 + 8) = *(short *)(unaff_s2 + 8) - in_stack_00000010;
    *(short *)(unaff_s2 + 10) = *(short *)(unaff_s2 + 10) - in_stack_00000012;
    p_Var1 = (_G2AnimSection_Type *)((uint)*(ushort *)(unaff_s2 + 0xc) - (uint)in_stack_00000014);
  }
  *(undefined2 *)(unaff_s2 + 0xc) = (short)p_Var1;
  return p_Var1;
}



// decompiled code
// original method signature: 
// enum _G2Bool_Enum /*$ra*/ G2Anim_SegmentHasActiveChannels(struct _G2Anim_Type *anim /*$s0*/, int segNumber /*$s1*/, unsigned short chanMask /*$a2*/)
 // line 758, offset 0x80092f84
	/* begin block 1 */
		// Start line: 759
		// Start offset: 0x80092F84
		// Variables:
	// 		struct _G2AnimSection_Type *section; // $a1
	// 		unsigned char *segChanFlagStream; // $a0
	// 		unsigned char activeChanBits; // $a2
	// 		unsigned short dataFlagBits; // $v1
	// 		unsigned short segFlagBits; // $a1
	// 		int flagBytesPerSeg; // $t0
	/* end block 1 */
	// End offset: 0x800930A0
	// End Line: 848

	/* begin block 2 */
		// Start line: 1650
	/* end block 2 */
	// End Line: 1651

_G2Bool_Enum G2Anim_SegmentHasActiveChannels(_G2Anim_Type *anim,int segNumber,ushort chanMask)

{
  _G2Bool_Enum _Var1;
  int unaff_s2;
  ushort in_stack_00000014;
  
  _Var1 = (uint)*(ushort *)(unaff_s2 + 0xc) - (uint)in_stack_00000014;
  *(undefined2 *)(unaff_s2 + 0xc) = (short)_Var1;
  return _Var1;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_GetSegChannelValue(struct _G2Anim_Type *anim /*$s0*/, int segIndex /*$s1*/, unsigned short *valueTable /*$s3*/, unsigned short channelMask /*$s2*/)
 // line 866, offset 0x800930c4
	/* begin block 1 */
		// Start line: 867
		// Start offset: 0x800930C4
		// Variables:
	// 		unsigned short *chanFinalValue; // $v1

		/* begin block 1.1 */
			// Start line: 867
			// Start offset: 0x800930C4

			/* begin block 1.1.1 */
				// Start line: 867
				// Start offset: 0x800930C4
				// Variables:
			// 		unsigned short z; // $v1
			// 		unsigned long xy; // $v0
			/* end block 1.1.1 */
			// End offset: 0x800930C4
			// End Line: 867
		/* end block 1.1 */
		// End offset: 0x800930C4
		// End Line: 867
	/* end block 1 */
	// End offset: 0x80093154
	// End Line: 905

	/* begin block 2 */
		// Start line: 1902
	/* end block 2 */
	// End Line: 1903

void G2Anim_GetSegChannelValue
               (_G2Anim_Type *anim,int segIndex,ushort *valueTable,ushort channelMask)

{
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2Anim_GetRootMotionFromTimeForDuration(struct _G2Anim_Type *anim /*$t0*/, short durationStart /*$s1*/, short duration /*$s3*/, struct _G2SVector3_Type *motionVector /*$s5*/)
 // line 922, offset 0x80093170
	/* begin block 1 */
		// Start line: 923
		// Start offset: 0x80093170
		// Variables:
	// 		struct _G2Anim_Type dummyAnim; // stack offset -216
	// 		struct _G2AnimSection_Type *section; // $s2
	// 		struct _G2AnimKeylist_Type *keylist; // $s4
	// 		short storedKeyEndTime; // $s2
	// 		short timePerKey; // $s0
	// 		short keyTime; // $a0
	// 		long alpha; // $a1
	// 		struct _G2AnimInterpInfo_Type *interpInfo; // $a0

		/* begin block 1.1 */
			// Start line: 949
			// Start offset: 0x800931C8
			// Variables:
		// 		struct _G2SVector3_Type *dest; // $s5
		// 		struct _G2SVector3_Type *base; // $v0
		// 		struct _G2SVector3_Type *offset; // $v1
		// 		long alpha; // $a1
		/* end block 1.1 */
		// End offset: 0x800931C8
		// End Line: 949

		/* begin block 1.2 */
			// Start line: 965
			// Start offset: 0x800932AC
			// Variables:
		// 		struct _G2SVector3_Type *vector; // $s5
		/* end block 1.2 */
		// End offset: 0x800932AC
		// End Line: 965

		/* begin block 1.3 */
			// Start line: 1001
			// Start offset: 0x800933A0
			// Variables:
		// 		struct _G2SVector3_Type *dest; // $s5
		// 		struct _G2SVector3_Type *base; // $s5
		// 		long alpha; // $a1
		/* end block 1.3 */
		// End offset: 0x800933A0
		// End Line: 1001
	/* end block 1 */
	// End offset: 0x80093420
	// End Line: 1015

	/* begin block 2 */
		// Start line: 2014
	/* end block 2 */
	// End Line: 2015

void G2Anim_GetRootMotionFromTimeForDuration
               (_G2Anim_Type *anim,short durationStart,short duration,_G2SVector3_Type *motionVector
               )

{
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2AnimSection_SwitchToKeylistAtTime(struct _G2AnimSection_Type *section /*$s1*/, struct _G2AnimKeylist_Type *keylist /*$s4*/, int keylistID /*$s5*/, short targetTime /*$s3*/)
 // line 1121, offset 0x80093448
	/* begin block 1 */
		// Start line: 1122
		// Start offset: 0x80093448
		// Variables:
	// 		struct _G2Anim_Type *anim; // $s2
	// 		struct _G2SVector3_Type rootMotion; // stack offset -40
	// 		struct _G2AnimInterpInfo_Type *interpInfo; // $s0

		/* begin block 1.1 */
			// Start line: 1144
			// Start offset: 0x800934D0
		/* end block 1.1 */
		// End offset: 0x800934D8
		// End Line: 1144

		/* begin block 1.2 */
			// Start line: 1197
			// Start offset: 0x80093594

			/* begin block 1.2.1 */
				// Start line: 1197
				// Start offset: 0x80093594
				// Variables:
			// 		unsigned short z; // $v1
			// 		unsigned long xy; // $v0
			/* end block 1.2.1 */
			// End offset: 0x800935B4
			// End Line: 1197
		/* end block 1.2 */
		// End offset: 0x800935B4
		// End Line: 1197
	/* end block 1 */
	// End offset: 0x800935D0
	// End Line: 1206

	/* begin block 2 */
		// Start line: 2242
	/* end block 2 */
	// End Line: 2243

void G2AnimSection_SwitchToKeylistAtTime
               (_G2AnimSection_Type *section,_G2AnimKeylist_Type *keylist,int keylistID,
               short targetTime)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  uint unaff_s0;
  int unaff_s2;
  int iVar4;
  _G2AnimSection_Type *unaff_s3;
  int unaff_s4;
  ushort *unaff_s5;
  int unaff_s6;
  int iVar5;
  short in_stack_00000038;
  undefined4 in_stack_0000005c;
  
  while( true ) {
    if ((int)(short)section < (int)(short)unaff_s0) {
      iVar5 = ((int)(short)section << 0xc) / (int)(short)unaff_s0;
    }
    else {
      iVar5 = 0x1000;
    }
    setCopReg(2,0xc800,(uint)*unaff_s5);
    setCopReg(2,0xd000,(uint)unaff_s5[1]);
    setCopReg(2,0xd800,(uint)unaff_s5[2]);
    setCopReg(2,0x4800,(uint)(ushort)TerrainVramBlock.next);
    setCopReg(2,0x5000,(uint)TerrainVramBlock.next._2_2_);
    setCopReg(2,0x5800,(uint)TerrainVramBlock._4_2_);
    setCopReg(2,0x4000,iVar5);
    copFunction(2,0x1a8003e);
    uVar1 = getCopReg(2,0xc800);
    uVar2 = getCopReg(2,0xd000);
    uVar3 = getCopReg(2,0xd800);
    *unaff_s5 = (ushort)uVar1;
    unaff_s5[1] = (ushort)uVar2;
    unaff_s5[2] = (ushort)uVar3;
    unaff_s3 = (_G2AnimSection_Type *)((int)unaff_s3 - (int)section);
    iVar4 = unaff_s2 + unaff_s0;
    if (((uint)unaff_s3 & 0xffff) == 0) break;
    in_stack_00000038 = (short)unaff_s2;
    if (unaff_s6 <= (int)in_stack_00000038) {
      unaff_s0 = (uint)*(byte *)(unaff_s4 + 1);
    }
    FUN_80094ba8(&stack0x00000034,&stack0x00000010);
    section = (_G2AnimSection_Type *)(iVar4 - unaff_s2);
    unaff_s2 = iVar4;
    if ((int)unaff_s3 * 0x10000 < (int)section * 0x10000) {
      section = unaff_s3;
      unaff_s2 = iVar4;
    }
  }
  FUN_80094dc4(in_stack_0000005c,iVar5);
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ G2AnimSection_JumpToTime(struct _G2AnimSection_Type *section /*$s0*/, short targetTime /*$a1*/)
 // line 1225, offset 0x80093600
	/* begin block 1 */
		// Start line: 1226
		// Start offset: 0x80093600
		// Variables:
	// 		struct _G2Anim_Type *anim; // $s1

		/* begin block 1.1 */
			// Start line: 1266
			// Start offset: 0x80093680
		/* end block 1.1 */
		// End offset: 0x80093688
		// End Line: 1266
	/* end block 1 */
	// End offset: 0x80093688
	// End Line: 1268

	/* begin block 2 */
		// Start line: 2628
	/* end block 2 */
	// End Line: 2629

void G2AnimSection_JumpToTime(_G2AnimSection_Type *section,short targetTime)

{
  undefined2 in_register_00000016;
  int unaff_s0;
  byte *unaff_s1;
  int unaff_s2;
  int unaff_s4;
  undefined2 unaff_s5;
  undefined4 in_stack_00000010;
  undefined2 in_stack_00000014;
  
  if (section != (_G2AnimSection_Type *)0x0) {
    FUN_80092a3c(section,CONCAT22(in_register_00000016,targetTime));
    *(undefined4 *)(unaff_s0 + 8) = 0;
  }
  FUN_8008ff44();
  if (unaff_s4 != *(int *)(unaff_s1 + 0x24)) {
    *(int *)(unaff_s1 + 0x24) = unaff_s4;
    *(undefined2 *)(unaff_s1 + 0x14) = unaff_s5;
    *(short *)(unaff_s1 + 6) = -*(short *)(unaff_s4 + 6);
  }
  FUN_800936d8();
  if (unaff_s1[2] == 0) {
    *unaff_s1 = *unaff_s1 | 0x80;
    *(undefined4 *)(unaff_s2 + 8) = in_stack_00000010;
    *(undefined2 *)(unaff_s2 + 0xc) = in_stack_00000014;
  }
  if ((*unaff_s1 & 2) != 0) {
    FUN_8009012c();
  }
  FUN_80090198();
  *(undefined4 *)(unaff_s1 + 0xc) = 0;
  return;
}



// decompiled code
// original method signature: 
// short /*$ra*/ G2AnimSection_UpdateOverInterval(struct _G2AnimSection_Type *section /*$s0*/, short interval /*$a1*/)
 // line 1273, offset 0x800936a0
	/* begin block 1 */
		// Start line: 1274
		// Start offset: 0x800936A0
		// Variables:
	// 		struct _G2Anim_Type *anim; // $s2
	// 		struct _G2SVector3_Type motionVector; // stack offset -32
	// 		struct _G2AnimInterpInfo_Type *interpInfo; // $s1
	// 		short elapsedTime; // $s3

		/* begin block 1.1 */
			// Start line: 1324
			// Start offset: 0x80093788

			/* begin block 1.1.1 */
				// Start line: 1324
				// Start offset: 0x80093788
				// Variables:
			// 		unsigned short z; // $v1
			// 		unsigned long xy; // $v0
			/* end block 1.1.1 */
			// End offset: 0x80093788
			// End Line: 1324
		/* end block 1.1 */
		// End offset: 0x80093788
		// End Line: 1324
	/* end block 1 */
	// End offset: 0x80093874
	// End Line: 1361

	/* begin block 2 */
		// Start line: 2725
	/* end block 2 */
	// End Line: 2726

short G2AnimSection_UpdateOverInterval(_G2AnimSection_Type *section,short interval)

{
  short sVar1;
  int unaff_s1;
  
  FUN_8009012c();
  sVar1 = FUN_80090198();
  *(undefined4 *)(unaff_s1 + 0xc) = 0;
  return sVar1;
}



// decompiled code
// original method signature: 
// short /*$ra*/ G2AnimSection_AdvanceOverInterval(struct _G2AnimSection_Type *section /*$s1*/, short interval /*$s0*/)
 // line 1381, offset 0x80093894
	/* begin block 1 */
		// Start line: 1382
		// Start offset: 0x80093894
		// Variables:
	// 		struct _G2AnimKeylist_Type *keylist; // $a0
	// 		short newTime; // $s6
	// 		short extraTime; // $s2
	// 		short elapsedTime; // $fp
	// 		short endTime; // $s4
	// 		short loopExtraTime; // stack offset -48
	// 		short *swAlarmTable; // $s0
	// 		short swAlarmTime; // $v1
	// 		struct _G2Anim_Type *anim; // $s7
	// 		struct _G2SVector3_Type motionVector; // stack offset -56
	// 		unsigned long message; // $s3

		/* begin block 1.1 */
			// Start line: 1614
			// Start offset: 0x80093BD0
		/* end block 1.1 */
		// End offset: 0x80093BD8
		// End Line: 1614

		/* begin block 1.2 */
			// Start line: 1624
			// Start offset: 0x80093BE8

			/* begin block 1.2.1 */
				// Start line: 1624
				// Start offset: 0x80093BE8
				// Variables:
			// 		unsigned short z; // $v1
			// 		unsigned long xy; // $v0
			/* end block 1.2.1 */
			// End offset: 0x80093BE8
			// End Line: 1624
		/* end block 1.2 */
		// End offset: 0x80093BE8
		// End Line: 1624
	/* end block 1 */
	// End offset: 0x80093C3C
	// End Line: 1658

	/* begin block 2 */
		// Start line: 2959
	/* end block 2 */
	// End Line: 2960

short G2AnimSection_AdvanceOverInterval(_G2AnimSection_Type *section,short interval)

{
  undefined2 in_register_00000016;
  byte *unaff_s0;
  int unaff_s1;
  short unaff_s4;
  undefined4 uStack00000010;
  undefined4 uStack00000014;
  
  FUN_80092a3c(*(undefined4 *)(unaff_s1 + 8),CONCAT22(in_register_00000016,interval));
  *(undefined4 *)(unaff_s1 + 8) = 0;
  if ((*unaff_s0 & 2) != 0) {
    FUN_8009012c();
  }
  *(uint *)(unaff_s0 + 0x18) = *(uint *)(unaff_s0 + 0x18) | 0x10;
  if (*(int *)(unaff_s0 + 0x1c) != 0) {
    uStack00000010 = 0;
    uStack00000014 = *(undefined4 *)(unaff_s0 + 0x20);
    (**(code **)(unaff_s0 + 0x1c))();
  }
  return unaff_s4;
}



// decompiled code
// original method signature: 
// short /*$ra*/ G2AnimSection_RewindOverInterval(struct _G2AnimSection_Type *section /*$s1*/, short interval /*$a1*/)
 // line 1671, offset 0x80093c6c
	/* begin block 1 */
		// Start line: 1672
		// Start offset: 0x80093C6C
		// Variables:
	// 		short newTime; // $s3
	// 		short extraTime; // $s6
	// 		short elapsedTime; // $s7
	// 		short endTime; // $s2
	// 		struct _G2Anim_Type *anim; // $s4
	// 		struct _G2SVector3_Type motionVector; // stack offset -48
	// 		unsigned long message; // $s5

		/* begin block 1.1 */
			// Start line: 1832
			// Start offset: 0x80093E34
		/* end block 1.1 */
		// End offset: 0x80093E3C
		// End Line: 1832

		/* begin block 1.2 */
			// Start line: 1841
			// Start offset: 0x80093E4C

			/* begin block 1.2.1 */
				// Start line: 1841
				// Start offset: 0x80093E4C
				// Variables:
			// 		unsigned short z; // $v1
			// 		unsigned long xy; // $v0
			/* end block 1.2.1 */
			// End offset: 0x80093E4C
			// End Line: 1841
		/* end block 1.2 */
		// End offset: 0x80093E4C
		// End Line: 1841
	/* end block 1 */
	// End offset: 0x80093E80
	// End Line: 1867

	/* begin block 2 */
		// Start line: 3631
	/* end block 2 */
	// End Line: 3632

short G2AnimSection_RewindOverInterval(_G2AnimSection_Type *section,short interval)

{
  ushort uVar1;
  undefined4 uVar2;
  int in_v1;
  int iVar3;
  byte *unaff_s1;
  short sVar4;
  uint unaff_s2;
  undefined4 uVar5;
  int unaff_s7;
  short unaff_s8;
  undefined4 in_stack_00000018;
  undefined2 in_stack_0000001c;
  ushort in_stack_00000020;
  
  do {
    FUN_800936d8();
    iVar3 = in_v1;
LAB_80093cb0:
    do {
      sVar4 = (short)unaff_s2;
      if (unaff_s1[2] == 0) {
        *(undefined4 *)(unaff_s7 + 8) = in_stack_00000018;
        *(undefined2 *)(unaff_s7 + 0xc) = in_stack_0000001c;
        *unaff_s1 = *unaff_s1 | 0x80;
      }
      if ((*unaff_s1 & 2) == 0) {
LAB_80093d08:
        *(short *)(unaff_s1 + 4) = (short)iVar3;
        return sVar4;
      }
      uVar1 = *(ushort *)(unaff_s1 + 10);
      unaff_s2 = (uint)in_stack_00000020;
      if ((int)(unaff_s2 << 0x10) < 0) {
        sVar4 = 0;
        goto LAB_80093d08;
      }
      uVar5 = 2;
      if ((*unaff_s1 & 2) == 0) {
        uVar5 = 1;
        iVar3 = (uint)uVar1 - 1;
        *(uint *)(unaff_s1 + 0x18) = *(uint *)(unaff_s1 + 0x18) | 1;
      }
      else {
        *(uint *)(unaff_s1 + 0x18) = *(uint *)(unaff_s1 + 0x18) | 4;
        FUN_800936d8();
        iVar3 = (uint)*(ushort *)(unaff_s1 + 8) + unaff_s2;
        in_stack_00000020 = (short)iVar3 - uVar1;
        FUN_80094c98();
        if ((int)(short)uVar1 <= iVar3 * 0x10000 >> 0x10) {
          iVar3 = (uint)uVar1 - 1;
        }
      }
      if (unaff_s1[2] == 0) {
        unaff_s7 = FUN_80094c78();
        FUN_8008fb30(unaff_s7,(int)unaff_s8,(int)(short)uVar1,&stack0x00000018);
      }
    } while (*(int *)(unaff_s1 + 0x1c) == 0);
    uVar2 = FUN_80094c78();
    in_v1 = (**(code **)(unaff_s1 + 0x1c))(uVar2,(uint)unaff_s1[1],uVar5,(int)(short)iVar3);
  } while ((int)(short)in_v1 != (int)(short)iVar3);
  if ((*unaff_s1 & 2) == 0) {
    in_stack_00000018 = 0;
    in_stack_0000001c = 0;
  }
  else {
    FUN_800936d8();
    *(undefined2 *)(unaff_s1 + 6) = *(undefined2 *)(unaff_s1 + 8);
  }
  goto LAB_80093cb0;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2Anim_BuildTransformsNoControllers(struct _G2Anim_Type *anim /*$s4*/)
 // line 1876, offset 0x80093eac
	/* begin block 1 */
		// Start line: 1877
		// Start offset: 0x80093EAC
		// Variables:
	// 		struct _Segment *segment; // $a1
	// 		struct _G2Matrix_Type *segMatrix; // $s5
	// 		enum _G2Bool_Enum bRootTransUpdated; // $a2
	// 		int segIndex; // $s3
	// 		int segCount; // $s6
	// 		unsigned long disabledBits[3]; // stack offset -56
	// 		unsigned long disabledMask; // $s1
	// 		unsigned long parentMask; // $v1
	// 		unsigned long parentIndex; // $v0
	/* end block 1 */
	// End offset: 0x80093FD4
	// End Line: 1949

	/* begin block 2 */
		// Start line: 4114
	/* end block 2 */
	// End Line: 4115

void _G2Anim_BuildTransformsNoControllers(_G2Anim_Type *anim)

{
  short sVar1;
  int in_v0;
  byte *unaff_s1;
  short unaff_s3;
  int unaff_s4;
  undefined4 uStack00000014;
  undefined4 in_stack_00000018;
  undefined2 in_stack_0000001c;
  
  uStack00000014 = *(undefined4 *)(unaff_s1 + 0x20);
  sVar1 = (**(code **)(unaff_s1 + 0x1c))();
  if (((*unaff_s1 & 2) == 0) && ((int)sVar1 == in_v0 >> 0x10)) {
    in_stack_00000018 = 0;
    in_stack_0000001c = 0;
  }
  else {
    FUN_800936d8();
    unaff_s3 = sVar1;
  }
  if (unaff_s1[2] == 0) {
    *(undefined4 *)(unaff_s4 + 8) = in_stack_00000018;
    *(undefined2 *)(unaff_s4 + 0xc) = in_stack_0000001c;
    *unaff_s1 = *unaff_s1 | 0x80;
  }
  *(short *)(unaff_s1 + 4) = unaff_s3;
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2Anim_BuildSegTransformNoControllers(struct _G2Matrix_Type *segMatrix /*$s0*/, struct _G2Matrix_Type *parentMatrix /*$s3*/, enum _G2Bool_Enum bRootTransUpdated /*$s4*/, int segIndex /*$a3*/)
 // line 1959, offset 0x80094000
	/* begin block 1 */
		// Start line: 1960
		// Start offset: 0x80094000
		// Variables:
	// 		struct _G2AnimSegValue_Type *segValue; // $s1
	// 		struct _G2LVector3_Type scale; // stack offset -40

		/* begin block 1.1 */
			// Start line: 2009
			// Start offset: 0x80094084
			// Variables:
		// 		struct _G2SVector3_Type *svector; // $v0
		// 		struct _G2LVector3_Type *lvector; // $v1
		/* end block 1.1 */
		// End offset: 0x80094084
		// End Line: 2009
	/* end block 1 */
	// End offset: 0x800941CC
	// End Line: 2055

	/* begin block 2 */
		// Start line: 4369
	/* end block 2 */
	// End Line: 4370

void _G2Anim_BuildSegTransformNoControllers
               (_G2Matrix_Type *segMatrix,_G2Matrix_Type *parentMatrix,
               _G2Bool_Enum bRootTransUpdated,int segIndex)

{
  int iVar1;
  uint *unaff_s0;
  uint *puVar2;
  uint unaff_s1;
  ushort *puVar3;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  
  puVar3 = (ushort *)&parentMatrix->scaleFlag;
  puVar2 = unaff_s0;
  do {
    iVar1 = (uint)*puVar3 << 0x10;
    if ((iVar1 >> 0x10 != -1) && ((unaff_s0[iVar1 >> 0x15] & 1 << (*puVar3 & 0x1f)) != 0)) {
      *puVar2 = *puVar2 | unaff_s1;
    }
    if ((*puVar2 & unaff_s1) == 0) {
      FUN_800940d8(unaff_s5,*(int *)(unaff_s4 + 0x14) + (int)(short)*puVar3 * 0x20,bRootTransUpdated
                   ,unaff_s3);
    }
    bRootTransUpdated = G2FALSE;
    puVar3 = puVar3 + 0xc;
    unaff_s5 = unaff_s5 + 0x20;
    unaff_s1 = unaff_s1 << 1;
    unaff_s3 = unaff_s3 + 1;
    if (unaff_s1 == 0) {
      puVar2 = puVar2 + 1;
      unaff_s1 = 1;
    }
  } while (unaff_s3 < unaff_s6);
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2Anim_BuildSegLocalRotMatrix(struct _G2AnimSegValue_Type *segValue /*$v1*/, struct _G2Matrix_Type *segMatrix /*$a1*/)
 // line 2063, offset 0x80094228
	/* begin block 1 */
		// Start line: 2064
		// Start offset: 0x80094228
		// Variables:
	// 		struct _G2SVector3_Type rot; // stack offset -16

		/* begin block 1.1 */
			// Start line: 2070
			// Start offset: 0x80094254
			// Variables:
		// 		struct _G2SVector3_Type *source; // $v1
		// 		struct _G2SVector3_Type *dest; // $a0

			/* begin block 1.1.1 */
				// Start line: 2070
				// Start offset: 0x80094254
				// Variables:
			// 		unsigned long mask; // $a2
			// 		unsigned short z; // $v0
			// 		unsigned long xy; // $v1
			/* end block 1.1.1 */
			// End offset: 0x80094254
			// End Line: 2070
		/* end block 1.1 */
		// End offset: 0x80094254
		// End Line: 2070
	/* end block 1 */
	// End offset: 0x80094278
	// End Line: 2074

	/* begin block 2 */
		// Start line: 4616
	/* end block 2 */
	// End Line: 4617

void _G2Anim_BuildSegLocalRotMatrix(_G2AnimSegValue_Type *segValue,_G2Matrix_Type *segMatrix)

{
  undefined4 uVar1;
  undefined4 in_zero;
  undefined4 in_at;
  undefined2 in_t2;
  int unaff_s0;
  int unaff_s1;
  int unaff_s3;
  int unaff_s4;
  
  *(undefined2 *)(unaff_s0 + 0x10) = in_t2;
  setCopReg(2,in_zero,*(undefined4 *)(unaff_s1 + 0x10));
  setCopReg(2,in_at,*(undefined4 *)(unaff_s1 + 0x14));
  copFunction(2,0x486012);
  uVar1 = getCopReg(2,0x19);
  *(undefined4 *)(unaff_s0 + 0x14) = uVar1;
  uVar1 = getCopReg(2,0x1a);
  *(undefined4 *)(unaff_s0 + 0x18) = uVar1;
  uVar1 = getCopReg(2,0x1b);
  *(undefined4 *)(unaff_s0 + 0x1c) = uVar1;
  if (unaff_s4 != 0) {
    *(int *)(unaff_s3 + 0x14) = *(int *)(unaff_s3 + 0x14) + *(int *)(unaff_s0 + 0x14);
    *(int *)(unaff_s3 + 0x18) = *(int *)(unaff_s3 + 0x18) + *(int *)(unaff_s0 + 0x18);
    *(int *)(unaff_s3 + 0x1c) = *(int *)(unaff_s3 + 0x1c) + *(int *)(unaff_s0 + 0x1c);
    *(undefined4 *)(unaff_s0 + 0x14) = 0;
    *(undefined4 *)(unaff_s0 + 0x18) = 0;
    *(undefined4 *)(unaff_s0 + 0x1c) = 0;
  }
  *(int *)(unaff_s0 + 0x14) = *(int *)(unaff_s0 + 0x14) + *(int *)(unaff_s3 + 0x14);
  *(int *)(unaff_s0 + 0x18) = *(int *)(unaff_s0 + 0x18) + *(int *)(unaff_s3 + 0x18);
  *(int *)(unaff_s0 + 0x1c) = *(int *)(unaff_s0 + 0x1c) + *(int *)(unaff_s3 + 0x1c);
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ wombat(unsigned char *segKeyList /*$a0*/, int flagBitOffset /*$a1*/, struct _G2AnimSegKeyflagInfo_Type *kfInfo /*$a2*/)
 // line 2113, offset 0x80094288
	/* begin block 1 */
		// Start line: 2116
		// Start offset: 0x80094288
		// Variables:
	// 		int flagDWordOffset; // $a3
	// 		int flagBitShift; // $a1
	/* end block 1 */
	// End offset: 0x80094288
	// End Line: 2118

	/* begin block 2 */
		// Start line: 4716
	/* end block 2 */
	// End Line: 4717

	/* begin block 3 */
		// Start line: 4718
	/* end block 3 */
	// End Line: 4719

	/* begin block 4 */
		// Start line: 4720
	/* end block 4 */
	// End Line: 4721

void wombat(uchar *segKeyList,int flagBitOffset,_G2AnimSegKeyflagInfo_Type *kfInfo)

{
  int in_v0;
  int unaff_s0;
  int unaff_s3;
  
  *(int *)(unaff_s3 + 0x1c) = in_v0 + *(int *)(unaff_s0 + 0x1c);
  *(undefined4 *)(unaff_s0 + 0x14) = 0;
  *(undefined4 *)(unaff_s0 + 0x18) = 0;
  *(undefined4 *)(unaff_s0 + 0x1c) = 0;
  *(int *)(unaff_s0 + 0x14) = *(int *)(unaff_s0 + 0x14) + *(int *)(unaff_s3 + 0x14);
  *(int *)(unaff_s0 + 0x18) = *(int *)(unaff_s0 + 0x18) + *(int *)(unaff_s3 + 0x18);
  *(int *)(unaff_s0 + 0x1c) = *(int *)(unaff_s0 + 0x1c) + *(int *)(unaff_s3 + 0x1c);
  return;
}



// decompiled code
// original method signature: 
// unsigned long /*$ra*/ kangaroo(struct _G2AnimSegKeyflagInfo_Type *kfInfo /*$a0*/)
 // line 2129, offset 0x800942c0
	/* begin block 1 */
		// Start line: 2132
		// Start offset: 0x800942C0
		// Variables:
	// 		unsigned long keyflags; // $a2
	// 		unsigned long tempFlags; // $v0
	/* end block 1 */
	// End offset: 0x80094340
	// End Line: 2160

	/* begin block 2 */
		// Start line: 4758
	/* end block 2 */
	// End Line: 4759

	/* begin block 3 */
		// Start line: 4760
	/* end block 3 */
	// End Line: 4761

	/* begin block 4 */
		// Start line: 4763
	/* end block 4 */
	// End Line: 4764

ulong kangaroo(_G2AnimSegKeyflagInfo_Type *kfInfo)

{
  int in_v0;
  ulong uVar1;
  int in_v1;
  int unaff_s0;
  int unaff_s3;
  
  *(int *)(unaff_s0 + 0x18) = in_v0 + in_v1;
  uVar1 = *(int *)(unaff_s0 + 0x1c) + *(int *)(unaff_s3 + 0x1c);
  *(ulong *)(unaff_s0 + 0x1c) = uVar1;
  return uVar1;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2Anim_InitializeSegValue(struct _G2Anim_Type *anim /*$a0*/, struct _G2AnimSegValue_Type *segValue /*$a1*/, int segIndex /*$a2*/)
 // line 2167, offset 0x80094348
	/* begin block 1 */
		// Start line: 2170
		// Start offset: 0x80094348
		// Variables:
	// 		struct _Segment *segment; // $v0

		/* begin block 1.1 */
			// Start line: 2170
			// Start offset: 0x80094348
			// Variables:
		// 		struct _G2Quat_Type *quat; // $a1
		/* end block 1.1 */
		// End offset: 0x80094348
		// End Line: 2170

		/* begin block 1.2 */
			// Start line: 2170
			// Start offset: 0x80094348
		/* end block 1.2 */
		// End offset: 0x80094348
		// End Line: 2170

		/* begin block 1.3 */
			// Start line: 2170
			// Start offset: 0x80094348

			/* begin block 1.3.1 */
				// Start line: 2170
				// Start offset: 0x80094348
				// Variables:
			// 		unsigned long zpad; // $v0
			// 		unsigned long xy; // $v1
			/* end block 1.3.1 */
			// End offset: 0x80094348
			// End Line: 2170
		/* end block 1.3 */
		// End offset: 0x80094348
		// End Line: 2170
	/* end block 1 */
	// End offset: 0x80094348
	// End Line: 2170

	/* begin block 2 */
		// Start line: 4838
	/* end block 2 */
	// End Line: 4839

	/* begin block 3 */
		// Start line: 4840
	/* end block 3 */
	// End Line: 4841

void _G2Anim_InitializeSegValue(_G2Anim_Type *anim,_G2AnimSegValue_Type *segValue,int segIndex)

{
  rmzyx_1();
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2AnimSection_InitStatus(struct _G2AnimSection_Type *section /*$s7*/, struct _G2Anim_Type *anim /*stack 4*/)
 // line 2224, offset 0x8009439c
	/* begin block 1 */
		// Start line: 2225
		// Start offset: 0x8009439C
		// Variables:
	// 		struct _G2AnimDecompressChannelInfo_Type dcInfo; // stack offset -104
	// 		struct _G2AnimSegValue_Type *segValue; // $s6
	// 		struct _G2AnimChanStatusBlock_Type **chanStatusNextBlockPtr; // $s5
	// 		struct _G2AnimChanStatusBlock_Type *chanStatusBlock; // $v0
	// 		struct _G2AnimChanStatus_Type *chanStatus; // $s2
	// 		int chanStatusChunkCount; // $s3
	// 		struct _G2AnimSegKeyflagInfo_Type rotKfInfo; // stack offset -88
	// 		struct _G2AnimSegKeyflagInfo_Type scaleKfInfo; // stack offset -72
	// 		struct _G2AnimSegKeyflagInfo_Type transKfInfo; // stack offset -56
	// 		int type; // $s0
	// 		unsigned long segChanFlags; // $s1
	// 		int segIndex; // $s4
	// 		int lastSeg; // $fp

		/* begin block 1.1 */
			// Start line: 2225
			// Start offset: 0x8009439C
			// Variables:
		// 		struct _G2Anim_Type *anim; // stack offset 4
		// 		struct _G2AnimSection_Type *section; // $s7

			/* begin block 1.1.1 */
				// Start line: 2225
				// Start offset: 0x8009439C
				// Variables:
			// 		int bitsPerFlagType; // $s2
			// 		int flagBitOffset; // $s0
			// 		unsigned long activeChanBits; // $s3
			// 		unsigned char *segKeyList; // $s1
			/* end block 1.1.1 */
			// End offset: 0x80094470
			// End Line: 2225
		/* end block 1.1 */
		// End offset: 0x80094470
		// End Line: 2225
	/* end block 1 */
	// End offset: 0x80094600
	// End Line: 2336

	/* begin block 2 */
		// Start line: 4952
	/* end block 2 */
	// End Line: 4953

void _G2AnimSection_InitStatus(_G2AnimSection_Type *section,_G2Anim_Type *anim)

{
  int in_v0;
  int iVar1;
  uint uVar2;
  
  if (in_v0 != 0) {
    iVar1 = *(int *)&section->loopStartTime + -3;
    *(uint *)&section->elapsedTime = *(uint *)&section->elapsedTime >> 3;
    *(int *)&section->loopStartTime = iVar1;
    if (iVar1 < 1) {
      iVar1 = *(int *)section;
      *(int *)section = iVar1 + 4;
      uVar2 = *(uint *)(iVar1 + 4);
      *(uint *)&section->elapsedTime = uVar2;
      if (*(int *)&section->loopStartTime < 0) {
        *(uint *)&section->elapsedTime = uVar2 >> (-*(int *)&section->loopStartTime & 0x1fU);
      }
      *(int *)&section->loopStartTime = *(int *)&section->loopStartTime + 0x20;
    }
  }
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ FooBar(struct _G2AnimSection_Type *section /*$s6*/, struct _G2Anim_Type *anim /*stack 4*/, int decompressedKey /*$s4*/, int targetKey /*stack 12*/, long timeOffset /*stack 16*/)
 // line 2346, offset 0x80094648
	/* begin block 1 */
		// Start line: 2347
		// Start offset: 0x80094648
		// Variables:
	// 		struct _G2AnimDecompressChannelInfo_Type dcInfo; // stack offset -152
	// 		struct _G2AnimSegValue_Type *segValue; // $s6
	// 		short *chanValue; // $s1
	// 		struct _G2AnimChanStatusBlock_Type *chanStatusBlock; // $s7
	// 		struct _G2AnimChanStatus_Type *chanStatus; // $s3
	// 		int chanStatusChunkCount; // $s5
	// 		struct _G2AnimSegKeyflagInfo_Type rotKfInfo; // stack offset -136
	// 		struct _G2AnimSegKeyflagInfo_Type scaleKfInfo; // stack offset -120
	// 		struct _G2AnimSegKeyflagInfo_Type transKfInfo; // stack offset -104
	// 		int type; // $s0
	// 		unsigned long segChanFlags; // $s2
	// 		int segIndex; // $s4
	// 		int lastSeg; // stack offset -48
	// 		struct _G2AnimDecompressChannelInfo_Type nextDCInfo; // stack offset -88
	// 		struct _G2AnimDecompressChannelInfo_Type initDCInfo; // stack offset -72
	// 		struct _G2AnimChanStatus_Type nextChanStatus; // stack offset -56

		/* begin block 1.1 */
			// Start line: 2347
			// Start offset: 0x80094648
			// Variables:
		// 		struct _G2Anim_Type *anim; // stack offset 4
		// 		struct _G2AnimSection_Type *section; // $s6

			/* begin block 1.1.1 */
				// Start line: 2347
				// Start offset: 0x80094648
				// Variables:
			// 		int bitsPerFlagType; // $s2
			// 		int flagBitOffset; // $s0
			// 		unsigned long activeChanBits; // $s3
			// 		unsigned char *segKeyList; // $s1
			/* end block 1.1.1 */
			// End offset: 0x80094728
			// End Line: 2347
		/* end block 1.1 */
		// End offset: 0x80094728
		// End Line: 2347
	/* end block 1 */
	// End offset: 0x80094AA0
	// End Line: 2508

	/* begin block 2 */
		// Start line: 5213
	/* end block 2 */
	// End Line: 5214

void FooBar(_G2AnimSection_Type *section,_G2Anim_Type *anim,int decompressedKey,int targetKey,
           long timeOffset)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int in_v0;
  _func_73 **pp_Var4;
  byte bVar5;
  uint unaff_s1;
  _G2Anim_Type *unaff_s2;
  int unaff_s3;
  int unaff_s4;
  _func_73 **unaff_s5;
  _G2Anim_Type *unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int iStack00000014;
  undefined4 in_stack_0000007c;
  
  iVar2 = in_v0;
  do {
    iStack00000014 = iVar2;
    unaff_s1 = unaff_s1 >> 1;
    uVar1 = unaff_s1;
    while (unaff_s1 == 0) {
      unaff_s4 = unaff_s4 + 1;
      unaff_s6 = (_G2Anim_Type *)unaff_s6->disabledBits;
      if (unaff_s8 <= unaff_s4) {
        *(short *)(unaff_s7 + 6) = -*(short *)(*(int *)(unaff_s7 + 0x24) + 6);
        return;
      }
      uVar1 = FUN_80094398(&stack0x00000020);
      iVar2 = FUN_80094398(&stack0x00000030);
      iVar3 = FUN_80094398(&stack0x00000040);
      unaff_s1 = uVar1 | iVar2 << 4 | iVar3 << 8;
      anim = unaff_s6;
      decompressedKey = unaff_s4;
      FUN_80094420(in_stack_0000007c);
    }
    iVar2 = iStack00000014;
    if ((uVar1 & 1) != 0) {
      bVar5 = *(byte *)(iStack00000014 + 1) & 0xe0;
      if (bVar5 == 0xe0) {
        bVar5 = 0;
      }
      if (bVar5 == 0) {
        iVar2 = iStack00000014 + (uint)*(ushort *)(timeOffset + 4) * 2;
      }
      else {
        iVar2 = iStack00000014 + 4;
        if (bVar5 != 0x20) {
          pp_Var4 = &the_mcmenu_table.pause;
          if (unaff_s3 == 0) {
            unaff_s3 = 8;
            G2EulerAngles_FromMatrix
                      ((_G2EulerAngles_Type *)&_BlockVramEntry_ARRAY_800d4708[8].type,
                       (_G2Matrix_Type *)anim,decompressedKey);
            *pp_Var4 = (_func_73 *)0x0;
            *(_func_73 ***)unaff_s5 = pp_Var4;
            unaff_s2 = (_G2Anim_Type *)(pp_Var4 + 1);
            unaff_s5 = pp_Var4;
          }
          if (bVar5 == 0x40) {
            anim = unaff_s2;
            FUN_8009038c(&timeOffset);
          }
          else {
            if (bVar5 == 0x60) {
              anim = unaff_s2;
              FUN_800903c4(&timeOffset);
            }
          }
          unaff_s2 = (_G2Anim_Type *)&unaff_s2->disabledControllerList;
          unaff_s3 = unaff_s3 + -1;
          iVar2 = iStack00000014;
        }
      }
    }
  } while( true );
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2AnimSection_UpdateStoredFrameFromData(struct _G2AnimSection_Type *section /*$s0*/, struct _G2Anim_Type *anim /*$s3*/)
 // line 2513, offset 0x80094ad0
	/* begin block 1 */
		// Start line: 2514
		// Start offset: 0x80094AD0
		// Variables:
	// 		short timePerKey; // $s2
	// 		long storedKey; // $a2
	// 		long targetKey; // $s1
	// 		long timeOffset; // $v0
	/* end block 1 */
	// End offset: 0x80094B38
	// End Line: 2546

	/* begin block 2 */
		// Start line: 5585
	/* end block 2 */
	// End Line: 5586

void _G2AnimSection_UpdateStoredFrameFromData(_G2AnimSection_Type *section,_G2Anim_Type *anim)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  ushort *puVar4;
  uint uVar5;
  byte bVar6;
  ushort *unaff_s1;
  uint unaff_s2;
  uint *unaff_s3;
  int unaff_s4;
  int unaff_s5;
  ushort *unaff_s6;
  int *unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  int in_stack_00000014;
  int in_stack_00000054;
  int in_stack_00000058;
  int in_stack_0000005c;
  int in_stack_00000064;
  short sStack00000070;
  uint in_stack_00000070;
  int in_stack_00000078;
  undefined4 in_stack_000000ac;
  int in_stack_000000b4;
  
  do {
    FUN_800903c4(&stack0x00000060,&stack0x00000070);
    do {
      FUN_800902f8(&stack0x00000050,&stack0x00000070);
      do {
        while( true ) {
          while( true ) {
            uVar5 = (in_stack_00000070 & 0xffff) - (uint)*unaff_s1;
            uVar1 = uVar5 & 0xffff;
            if (0x7ff < (int)(uVar5 * 0x10000) >> 0x10) {
              uVar1 = (uint)(ushort)((short)uVar5 - 0x1000);
            }
            sStack00000070 = (short)uVar1;
            if (sStack00000070 < -0x7ff) {
              uVar1 = (uint)(ushort)(sStack00000070 + 0x1000);
            }
            in_stack_00000070 = in_stack_00000070 & 0xffff0000 | uVar1;
            if (unaff_s4 != 0) {
              sStack00000070 = (short)uVar1;
              *unaff_s1 = *unaff_s1 + (short)((int)sStack00000070 * unaff_s8 >> 0xc);
            }
            do {
              do {
                unaff_s2 = unaff_s2 >> 1;
                unaff_s1 = unaff_s1 + 1;
                while (unaff_s2 == 0) {
                  unaff_s4 = unaff_s4 + 1;
                  unaff_s1 = unaff_s6 + 0xc;
                  if (in_stack_00000078 <= unaff_s4) {
                    return;
                  }
                  FUN_80094420(in_stack_000000ac,unaff_s1,unaff_s4);
                  uVar1 = FUN_80094398(&stack0x00000020);
                  iVar2 = FUN_80094398(&stack0x00000030);
                  iVar3 = FUN_80094398(&stack0x00000040);
                  unaff_s2 = uVar1 | iVar2 << 4 | iVar3 << 8;
                  unaff_s6 = unaff_s1;
                }
              } while ((unaff_s2 & 1) == 0);
              bVar6 = *(byte *)(in_stack_00000014 + 1) & 0xe0;
              if (bVar6 == 0xe0) {
                bVar6 = 0;
              }
              if (bVar6 == 0) {
                *unaff_s1 = *(ushort *)(in_stack_000000b4 * 2 + in_stack_00000014);
                in_stack_00000014 = in_stack_00000014 + (uint)*(ushort *)(in_stack_00000010 + 4) * 2
                ;
              }
              else {
                if (bVar6 == 0x20) {
                  *unaff_s1 = *(ushort *)(in_stack_00000014 + 2);
                  in_stack_00000014 = in_stack_00000014 + 4;
                }
                else {
                  if (bVar6 == 0x40) {
                    FUN_800901cc(&stack0x00000010,unaff_s3);
                  }
                  else {
                    if (bVar6 == 0x60) {
                      FUN_800902f8(&stack0x00000010,unaff_s3);
                    }
                  }
                  unaff_s5 = unaff_s5 + -1;
                  *unaff_s1 = *(ushort *)unaff_s3;
                  in_stack_00000070 = *unaff_s3;
                  unaff_s3 = unaff_s3 + 1;
                  if (unaff_s5 == 0) {
                    unaff_s7 = (int *)*unaff_s7;
                    unaff_s5 = 8;
                    unaff_s3 = (uint *)(unaff_s7 + 1);
                  }
                }
              }
            } while (unaff_s8 == 0);
            if (bVar6 != 0x40) break;
            if (in_stack_00000058 == -1) {
              FUN_8009038c(&stack0x00000060,&stack0x00000070);
            }
            FUN_800901cc(&stack0x00000050,&stack0x00000070);
          }
          if (0x40 < bVar6) break;
          if (bVar6 == 0) {
            puVar4 = (ushort *)(in_stack_0000005c * 2 + in_stack_00000054);
            in_stack_00000054 = in_stack_00000014;
            in_stack_00000064 = in_stack_00000014;
            in_stack_00000070 = in_stack_00000070 & 0xffff0000 | (uint)*puVar4;
          }
          else {
            if (bVar6 == 0x20) {
              in_stack_00000070 = in_stack_00000070 & 0xffff0000 | (uint)*unaff_s1;
              in_stack_00000054 = in_stack_00000014;
              in_stack_00000064 = in_stack_00000014;
            }
          }
        }
      } while (bVar6 != 0x60);
    } while (in_stack_00000058 != -1);
  } while( true );
}



// decompiled code
// original method signature: 
// struct _G2Anim_Type * /*$ra*/ _G2AnimSection_GetAnim(struct _G2AnimSection_Type *section /*$a0*/)
 // line 2557, offset 0x80094ba0
	/* begin block 1 */
		// Start line: 2560
		// Start offset: 0x80094BA0
	/* end block 1 */
	// End offset: 0x80094BA0
	// End Line: 2564

	/* begin block 2 */
		// Start line: 5694
	/* end block 2 */
	// End Line: 5695

	/* begin block 3 */
		// Start line: 5696
	/* end block 3 */
	// End Line: 5697

	/* begin block 4 */
		// Start line: 5700
	/* end block 4 */
	// End Line: 5701

_G2Anim_Type * _G2AnimSection_GetAnim(_G2AnimSection_Type *section)

{
  _G2Anim_Type *in_v0;
  
  return in_v0;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2AnimSection_TriggerEffects(struct _G2AnimSection_Type *section /*$s1*/, short startTime /*$a1*/, short endTime /*$a2*/)
 // line 2576, offset 0x80094bc0
	/* begin block 1 */
		// Start line: 2577
		// Start offset: 0x80094BC0
		// Variables:
	// 		struct _G2AnimKeylist_Type *keylist; // $s4
	// 		struct _G2AnimFxHeader_Type *fxHeader; // $s0
	// 		int fxSectionID; // $a0
	// 		unsigned long fxSize; // $s2
	/* end block 1 */
	// End offset: 0x80094CC8
	// End Line: 2617

	/* begin block 2 */
		// Start line: 5732
	/* end block 2 */
	// End Line: 5733

void _G2AnimSection_TriggerEffects(_G2AnimSection_Type *section,short startTime,short endTime)

{
  short sVar1;
  int iVar2;
  byte *unaff_s0;
  int iVar3;
  int iStack00000010;
  
  iVar2 = (int)*(short *)(*(int *)(unaff_s0 + 0x24) + 6);
  iVar3 = (int)*(short *)(unaff_s0 + 6) / iVar2;
  sVar1 = *(short *)(*(int *)(unaff_s0 + 0x24) + 6);
  iVar2 = (int)*(short *)(unaff_s0 + 4) / iVar2;
  if ((iVar3 < 0) || (iVar2 < iVar3)) {
    FUN_80094474();
  }
  iStack00000010 = (int)sVar1;
  iStack00000010 =
       (((int)*(short *)(unaff_s0 + 4) - iVar2 * iStack00000010) * 0x1000) / iStack00000010;
  FUN_80094720();
  *(undefined2 *)(unaff_s0 + 6) = *(undefined2 *)(unaff_s0 + 4);
  *unaff_s0 = *unaff_s0 | 0x80;
  return;
}



// decompiled code
// original method signature: 
// void /*$ra*/ _G2Anim_FreeChanStatusBlockList(struct _G2AnimChanStatusBlock_Type *block /*$a1*/)
 // line 2621, offset 0x80094cec
	/* begin block 1 */
		// Start line: 2622
		// Start offset: 0x80094CEC
		// Variables:
	// 		struct _G2AnimChanStatusBlock_Type *nextBlock; // $s0
	/* end block 1 */
	// End offset: 0x80094D1C
	// End Line: 2633

	/* begin block 2 */
		// Start line: 5825
	/* end block 2 */
	// End Line: 5826

void _G2Anim_FreeChanStatusBlockList(_G2AnimChanStatusBlock_Type *block)

{
  byte bVar1;
  int in_v0;
  undefined4 uVar2;
  int iVar3;
  byte *unaff_s0;
  int unaff_s1;
  int unaff_s3;
  int unaff_s4;
  
  do {
    bVar1 = *unaff_s0;
    if (((((uint)bVar1 & 0xf) == (uint)*(byte *)(unaff_s1 + 1)) &&
        (((iVar3 = (int)(short)(*(short *)(unaff_s0 + 2) * (ushort)*(byte *)(unaff_s4 + 1)),
          unaff_s3 < iVar3 || ((iVar3 == 0 && (unaff_s3 <= iVar3)))) && (iVar3 <= in_v0 >> 0x10))))
       && (*(int *)(unaff_s1 + 0x1c) != 0)) {
      uVar2 = FUN_80094c78();
      (**(code **)(unaff_s1 + 0x1c))(uVar2,(uint)*(byte *)(unaff_s1 + 1),6,(int)(char)unaff_s0[1]);
    }
    unaff_s0 = unaff_s0 + (((uint)bVar1 & 0xf0) >> 2);
  } while (unaff_s0[1] != 0xff);
  return;
}



// decompiled code
// original method signature: 
// long /*$ra*/ _G2AnimAlphaTable_GetValue(struct _G2AnimAlphaTable_Type *table /*$a2*/, long trueAlpha /*$v0*/)
 // line 2638, offset 0x80094d2c
	/* begin block 1 */
		// Start line: 2639
		// Start offset: 0x80094D2C
		// Variables:
	// 		long position; // $a0
	// 		long positionInt; // $v1
	// 		long positionFrac; // $a0
	// 		long value; // $a1
	/* end block 1 */
	// End offset: 0x80094D88
	// End Line: 2657

	/* begin block 2 */
		// Start line: 5859
	/* end block 2 */
	// End Line: 5860

long _G2AnimAlphaTable_GetValue(_G2AnimAlphaTable_Type *table,long trueAlpha)

{
  undefined4 uVar1;
  int in_v1;
  byte *unaff_s0;
  int unaff_s1;
  uint unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  
  do {
    if (in_v1 != 0) goto LAB_80094d8c;
    if (in_v1 < unaff_s3) goto LAB_80094d8c;
    do {
      if ((in_v1 <= unaff_s5) && (*(int *)(unaff_s1 + 0x1c) != 0)) {
        uVar1 = FUN_80094c78();
        (**(code **)(unaff_s1 + 0x1c))(uVar1,(uint)*(byte *)(unaff_s1 + 1),6,(int)(char)unaff_s0[1])
        ;
      }
LAB_80094d8c:
      do {
        unaff_s0 = unaff_s0 + unaff_s2;
        if (unaff_s0[1] == 0xff) {
          return -1;
        }
        unaff_s2 = ((uint)*unaff_s0 & 0xf0) >> 2;
      } while (((uint)*unaff_s0 & 0xf) != (uint)*(byte *)(unaff_s1 + 1));
      in_v1 = (int)(short)(*(short *)(unaff_s0 + 2) * (ushort)*(byte *)(unaff_s4 + 1));
    } while (unaff_s3 < in_v1);
  } while( true );
}





